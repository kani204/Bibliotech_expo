<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/head.ejs') %>
</head>
<body>
    <div class="logeoFondo">
        <img src="img/fondo.jpg" id="logeoFondoImg">
    </div>
    <header class="logeoHeader">
        <a href="/">Bibliotech</a>
    </header>
    <main class="logeoForm">
        <h1>Iniciar sesión</h1>
        <form action="/login" id="loginForm" method="POST">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" placeholder=". . ." required>
            <p class="hidden" id="emailMessageError">Escribe un email valido.</p>
            
            <label for="password">Contraseña</label>
            <input type="password" id="password" name="password" placeholder=". . ." required maxlength="16">
            <p class="hidden" id="passwordMessageError">Este espacio es obligatorio.</p>

            <% if(typeof error != 'undefined') { %>
                <% if(error == 'user_not_exist') { %>
                    <span class="error">Este email no existe.</span>
                <% } %>
                <% if(error == 'invalid_password') { %>
                    <span class="error">La contraseña es invalida.</span>
                <% } %>
                <% if(error == true) { %>
                    <span class="error">Ocurrio un error inesperado.</span>
                <% } %>
            <% } %>
            
            <button type="submit" id="formButton">Iniciar sesión</button>
        </form>
        <a href="/register">¿No te has registrado? Crea una cuenta.</a>
    </main>

    <% if(typeof account_created != 'undefined') { %> 
        <% if(account_created == "true") { %> 
            <div class="notificacion" style="display: flex;border-top-color: greenyellow;">
                <i class="fa-solid fa-check"></i>
                <p>Cuenta creada correctamente.</p>
            </div>

            <script>
                const noti = document.querySelector('.notificacion')
                setTimeout(() => {
                    noti.style.display = "none"
                }, 5000)
            </script>
        <% } %>
    <% } %>

    <script src="js/cambiarTema.js"></script>
    <script src="js/validarFormularioLogin.js"></script>
</body>
</html>